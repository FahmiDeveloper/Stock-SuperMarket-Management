<table class="table table-striped">
  <thead class="colorHeaderTable">
    <tr>
        <th>Name</th>
        <th></th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let file of (filteredFiles | sortBy: 'key' | paginate: { itemsPerPage: 8, currentPage: p })">
      <td>{{ file.name }}</td>
      <td>
        <section [ngClass]="isMobile ? 'custom-section-mobile' : 'custom-section'">
          <div>
            <button
                *ngIf="!checkIsImage(file.name) && !isZip(file.name)"
                type="button"
                (click)="viewOtherFileUpload(file, showOtherFile)"
                class="btn btn-primary">
                <i class="fa fa-eye" aria-hidden="true"></i>
            </button>

            <button
              *ngIf="checkIsImage(file.name)"
              type="button"
              (click)="viewFilePictureUpload(file, showPicture)"
              class="btn btn-primary">
              <i class="fa fa-eye" aria-hidden="true"></i>
            </button>

            <button
              *ngIf="isZip(file.name)"
              type="button"
              (click)="showZipFile(file, viewZipFile)"
              class="btn btn-primary">
              <i class="fa fa-eye" aria-hidden="true"></i>
            </button>
          </div>

          <div>
            <button
              type="button"
              (click)="downloadFile(file)"
              class="btn btn-success">
              <i class="fa fa-download" aria-hidden="true"></i>
            </button>
          </div>

          <div> 
            <button
              type="button"
              (click)="deleteFileUpload(file)"
              class="btn btn-danger">
              <i class="fa fa-trash" aria-hidden="true"></i>
            </button>
          </div>
        </section>
      </td>
    </tr>
  </tbody>
</table>

<div class="pagination" *ngIf="!isMobile">
  <pagination-controls (pageChange)="p = $event"></pagination-controls>
</div>

<div class="row" *ngIf="isMobile">
  <div class="col-md-4">
      <pagination-controls (pageChange)="p = $event" responsive="true"></pagination-controls>
  </div>        
</div>


<ng-template #showOtherFile let-modal let-c="close" let-d="dismiss">

  <div class="modal-header text-center">
      <h4 class="modal-title w-100 font-weight-bold">{{ FileName }}</h4>

      <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
          <span aria-hidden="true">&times;</span>
      </button>
  </div>

  <div class="modal-body">
      <div class="container">
          <div class="row">
            <ngx-doc-viewer 
              [url]="urlFile" 
              viewer="google" 
              [ngClass]="isMobile ? 'otherFileMobile' : 'otherFile'">
          </ngx-doc-viewer>
          </div>  
      </div>
  </div>        
</ng-template>


<ng-template #showPicture let-modal let-c="close" let-d="dismiss">

  <div class="modal-header text-center">
    <h4 class="modal-title w-100 font-weight-bold">{{ FileName }}</h4>

    <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
        <span aria-hidden="true">&times;</span>
    </button>
  </div>

  <div class="modal-body">
      <img [src]='pictureFile' [ngClass]="isMobile ? 'pictureFileMobile' : 'pictureFile'">
  </div>
</ng-template>


<ng-template #viewZipFile let-modal let-c="close" let-d="dismiss">

  <div class="modal-header text-center">
    <h4 class="modal-title w-100 font-weight-bold">{{ FileName }}</h4>

    <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
        <span aria-hidden="true">&times;</span>
    </button>
  </div>

  <div class="modal-body">
    <div *ngIf="isLoading" class="text-center">
      <div class="spinner-border" style="width: 10rem; height: 10rem;" role="status"></div><br><br>
      <h4>Extract files in progress...</h4>
    </div>

    
    <ul *ngIf="!isLoading">
        <ng-container *ngFor="let file of $zipFiles | async">
          <li *ngIf="file.fileName">
            <h5>
              {{file.fileName}}<br *ngIf="isMobile">&nbsp;
              <small style="font-weight: bold;color:blue;">({{file.date | date: 'dd/MM/yyyy'}})</small>&nbsp;
              <button
                type="button"
                (click)="saveFileFromZip(file)"
                class="btn btn-success">
                <i class="fa fa-download" aria-hidden="true"></i>
              </button>
            </h5> 
          </li><br *ngIf="file.fileName">
        </ng-container>
    </ul>
  </div>
</ng-template>