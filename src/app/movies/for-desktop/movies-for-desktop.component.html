<h1 class="titleTextInterface text-application">Movies</h1>

<div class="row">
    <div class="col-md-4">
        <mat-form-field class="widthInput">
            <mat-label class="text-application">Name</mat-label>
            <input matInput type="text" name="movieName" (keyup)="getAllMovies()" [(ngModel)]="movieName"/>
        </mat-form-field>
    </div>
    <div class="col-md-4">
        <mat-form-field class="widthInput">
            <mat-label class="text-application">Status</mat-label>
            <mat-select name="statusId" [(ngModel)]="statusId" (selectionChange)="getAllMovies()">
                <mat-option value=""></mat-option>
                <mat-option *ngFor="let statusMovie of statusMovies" [value]="statusMovie.id">
                    <span class="text-application">{{statusMovie.status}}</span>
                </mat-option>
            </mat-select>
        </mat-form-field>
    </div>
    <div class="col-md-4">
        <button 
            type="button" 
            (click)="newMovie()" 
            mat-mini-fab 
            style="background: #2196F3;float: right;">
            <mat-icon style="color: white;">add</mat-icon>
        </button>

        <button 
            *ngIf="!sortByDesc"
            type="button"  
            mat-mini-fab 
            color="primary" 
            (click)="sortByRefMovieDesc()" 
            style="background: #2196F3;float: right;margin-right: 10px;">
            <mat-icon style="color: white;" aria-label="Example icon-button with a heart icon">sort</mat-icon>
        </button>&nbsp;&nbsp;

        <button 
            *ngIf="sortByDesc"
            type="button"
            mat-mini-fab
            color="primary" 
            (click)="sortByRefMovieAsc()" 
            style="background: #2196F3;float: right;margin-right: 10px;">
            <mat-icon style="color: white;" aria-label="Example icon-button with a heart icon">sort</mat-icon>
        </button>&nbsp;&nbsp;
    </div>     
</div>

<br>

<mat-grid-list *ngIf="pagedList.length !== 0 && pagedList.length == 1" cols=1 #grid rowHeight="350px" gutterSize="15px">
    <mat-grid-tile *ngFor="let movie of pagedList">
        <div class="flip-container">
            <div class="card">
                <div class="front">
                    <img *ngIf="movie.imageUrl" [src]="movie.imageUrl" class="movie-image">
                    <img *ngIf="!movie.imageUrl" src="/assets/pictures/NoImageAvailable.png" class="movie-image">    
                </div>
                <div class="back">
                    <h4 class="text-application" style="text-align: center;font-weight: 600;">{{ movie.nameMovie }}</h4>
                    <br>
                    <h4 class="text-application" style="text-align: center;">
                        <span *ngIf="movie.year">{{ movie.year }}</span>
                        <span *ngIf="!movie.year"><i class="fa fa-minus-circle" aria-hidden="true"></i></span>  
                    </h4>
                    <br>
                    <span
                        [ngStyle]="{'margin-bottom': movie.nameMovie.length > 25 ? '3%' : ''}"
                        style="display: table; margin: 0 auto;"
                        [ngClass]="movie.statusId == 1 && !movie.part? 'wait-image' : 
                        movie.statusId == 2 && !movie.part ? 'not-download-image':
                        movie.statusId == 3 && !movie.part && movie.note !== 'Not liked' ? 'watched-image':
                        movie.statusId == 4 && !movie.part ? 'not-watched-image':
                        movie.statusId == 5 && !movie.part ? 'search-image':
                        movie.part && (movie.statusId == 1 || movie.statusId == 2|| movie.statusId == 3 || movie.statusId == 4 ||movie.statusId == 5) ? 'parts-image':
                        movie.statusId == 3 && !movie.part && movie.note == 'Not liked' ? 'not-liked-image':''">
                    </span>
                    <br>
                    <button 
                        *ngIf="!movie.part"
                        type="button"
                        mat-button
                        [matMenuTriggerFor]="menu" 
                        class="style-button text-application"
                        [ngStyle]="{'margin-bottom': movie.nameMovie.length > 25 ? '3%' : ''}">
                        <mat-icon style="color: #07609b">calendar_view_day</mat-icon>
                        Actions
                    </button>
                    <mat-menu #menu="matMenu" class="my-menu">
                        <button
                            mat-menu-item 
                            class="text-application"
                            (click)="editMovie(movie)">
                            <mat-icon style="color: #9C27B0">edit</mat-icon>
                            Edit
                        </button>
                        <button
                            *ngIf="movie.statusId == 1" 
                            mat-menu-item 
                            class="text-application"
                            (click)="followLink(movie.path)">
                            <mat-icon style="color: #3f51b5">remove_red_eye</mat-icon>
                            Check
                        </button>
                        <button
                            *ngIf="movie.statusId == 2" 
                            mat-menu-item 
                            class="text-application"
                            (click)="followLink(movie.path)">
                            <mat-icon style="color: green">cloud_download</mat-icon>
                            Download
                        </button>
                        <button
                            *ngIf="movie.statusId == 4" 
                            mat-menu-item 
                            class="text-application"
                            (click)="followLink(movie.path)">
                            <mat-icon style="color: #3f51b5">remove_red_eye</mat-icon>
                            Watch
                        </button>
                        <button
                            *ngIf="movie.statusId == 5" 
                            mat-menu-item 
                            class="text-application"
                            (click)="followLink(movie.path)">
                            <mat-icon style="color: #0e8999">search</mat-icon>
                            Search
                        </button>
                        <button
                            mat-menu-item 
                            class="text-application"
                            (click)="deleteMovie(movie.key)">
                            <mat-icon style="color: #f44336;">delete</mat-icon>
                            Delete
                        </button>
                    </mat-menu>                     
                    <button
                        *ngIf="movie.part" 
                        type="button"
                        mat-button 
                        (click)="showDetailsMovie(movie)"
                        class="style-button text-application"
                        [ngStyle]="{'margin-bottom': movie.nameMovie.length > 25 ? '3%' : ''}">
                        <mat-icon style="color: #a54403">view_list</mat-icon>
                        <span>Details</span>
                    </button>
                    <br><br>
                </div>
            </div>
        </div>   
    </mat-grid-tile>
</mat-grid-list>

<mat-grid-list *ngIf="pagedList.length !== 0 && pagedList.length == 2" cols=2 #grid rowHeight="350px" gutterSize="15px">
    <mat-grid-tile *ngFor="let movie of pagedList">
        <div class="flip-container">
            <div class="card">
                <div class="front">
                    <img *ngIf="movie.imageUrl" [src]="movie.imageUrl" class="movie-image">
                    <img *ngIf="!movie.imageUrl" src="/assets/pictures/NoImageAvailable.png" class="movie-image">    
                </div>
                <div class="back">
                    <h4 class="text-application" style="text-align: center;font-weight: 600;">{{ movie.nameMovie }}</h4>
                    <br>
                    <h4 class="text-application" style="text-align: center;">
                        <span *ngIf="movie.year">{{ movie.year }}</span>
                        <span *ngIf="!movie.year"><i class="fa fa-minus-circle" aria-hidden="true"></i></span>  
                    </h4>
                    <br>
                    <span
                        [ngStyle]="{'margin-bottom': movie.nameMovie.length > 25 ? '3%' : ''}"
                        style="display: table; margin: 0 auto;"
                        [ngClass]="movie.statusId == 1 && !movie.part? 'wait-image' : 
                        movie.statusId == 2 && !movie.part ? 'not-download-image':
                        movie.statusId == 3 && !movie.part && movie.note !== 'Not liked' ? 'watched-image':
                        movie.statusId == 4 && !movie.part ? 'not-watched-image':
                        movie.statusId == 5 && !movie.part ? 'search-image':
                        movie.part && (movie.statusId == 1 || movie.statusId == 2|| movie.statusId == 3 || movie.statusId == 4 ||movie.statusId == 5) ? 'parts-image':
                        movie.statusId == 3 && !movie.part && movie.note == 'Not liked' ? 'not-liked-image':''">
                    </span>
                    <br>
                    <button 
                        *ngIf="!movie.part"
                        type="button"
                        mat-button
                        [matMenuTriggerFor]="menu" 
                        class="style-button text-application"
                        [ngStyle]="{'margin-bottom': movie.nameMovie.length > 25 ? '3%' : ''}">
                        <mat-icon style="color: #07609b">calendar_view_day</mat-icon>
                        Actions
                    </button>
                    <mat-menu #menu="matMenu" class="my-menu">
                        <button
                            mat-menu-item 
                            class="text-application"
                            (click)="editMovie(movie)">
                            <mat-icon style="color: #9C27B0">edit</mat-icon>
                            Edit
                        </button>
                        <button
                            *ngIf="movie.statusId == 1" 
                            mat-menu-item 
                            class="text-application"
                            (click)="followLink(movie.path)">
                            <mat-icon style="color: #3f51b5">remove_red_eye</mat-icon>
                            Check
                        </button>
                        <button
                            *ngIf="movie.statusId == 2" 
                            mat-menu-item 
                            class="text-application"
                            (click)="followLink(movie.path)">
                            <mat-icon style="color: green">cloud_download</mat-icon>
                            Download
                        </button>
                        <button
                            *ngIf="movie.statusId == 4" 
                            mat-menu-item 
                            class="text-application"
                            (click)="followLink(movie.path)">
                            <mat-icon style="color: #3f51b5">remove_red_eye</mat-icon>
                            Watch
                        </button>
                        <button
                            *ngIf="movie.statusId == 5" 
                            mat-menu-item 
                            class="text-application"
                            (click)="followLink(movie.path)">
                            <mat-icon style="color: #0e8999">search</mat-icon>
                            Search
                        </button>
                        <button
                            mat-menu-item 
                            class="text-application"
                            (click)="deleteMovie(movie.key)">
                            <mat-icon style="color: #f44336;">delete</mat-icon>
                            Delete
                        </button>
                    </mat-menu>                     
                    <button
                        *ngIf="movie.part" 
                        type="button"
                        mat-button 
                        (click)="showDetailsMovie(movie)"
                        class="style-button text-application"
                        [ngStyle]="{'margin-bottom': movie.nameMovie.length > 25 ? '3%' : ''}">
                        <mat-icon style="color: #a54403">view_list</mat-icon>
                        <span>Details</span>
                    </button>
                    <br><br>
                </div>
            </div>
        </div>   
    </mat-grid-tile>
</mat-grid-list>

<ng-container *ngIf="isDesktop">
    <mat-grid-list *ngIf="pagedList.length !== 0 && pagedList.length == 3" cols=3 #grid rowHeight="320px" gutterSize="15px">
        <mat-grid-tile *ngFor="let movie of pagedList">
            <div class="flip-container">
                <div class="card">
                    <div class="front">
                        <img *ngIf="movie.imageUrl" [src]="movie.imageUrl" class="movie-image">
                        <img *ngIf="!movie.imageUrl" src="/assets/pictures/NoImageAvailable.png" class="movie-image">    
                    </div>
                    <div class="back">
                        <h4 class="text-application" style="text-align: center;font-weight: 600;">{{ movie.nameMovie }}</h4>
                        <br>
                        <h4 class="text-application" style="text-align: center;">
                            <span *ngIf="movie.year">{{ movie.year }}</span>
                            <span *ngIf="!movie.year"><i class="fa fa-minus-circle" aria-hidden="true"></i></span>  
                        </h4>
                        <br>
                        <span
                            [ngStyle]="{'margin-bottom': movie.nameMovie.length > 25 ? '3%' : ''}"
                            style="display: table; margin: 0 auto;"
                            [ngClass]="movie.statusId == 1 && !movie.part ? 'wait-image' : 
                            movie.statusId == 2 && !movie.part ? 'not-download-image':
                            movie.statusId == 3 && !movie.part && movie.note !== 'Not liked' ? 'watched-image':
                            movie.statusId == 4 && !movie.part ? 'not-watched-image':
                            movie.statusId == 5 && !movie.part ? 'search-image':
                            movie.part && (movie.statusId == 1 || movie.statusId == 2|| movie.statusId == 3 || movie.statusId == 4 ||movie.statusId == 5) ? 'parts-image':
                            movie.statusId == 3 && !movie.part && movie.note == 'Not liked' ? 'not-liked-image':''">
                        </span>
                        <br>
                        <button 
                            *ngIf="!movie.part"
                            type="button"
                            mat-button
                            [matMenuTriggerFor]="menu" 
                            class="style-button text-application"
                            [ngStyle]="{'margin-bottom': movie.nameMovie.length > 25 ? '3%' : ''}">
                            <mat-icon style="color: #07609b">calendar_view_day</mat-icon>
                            Actions
                        </button>
                        <mat-menu #menu="matMenu" class="my-menu">
                            <button
                                mat-menu-item 
                                class="text-application"
                                (click)="editMovie(movie)">
                                <mat-icon style="color: #9C27B0">edit</mat-icon>
                                Edit
                            </button>
                            <button
                                *ngIf="movie.statusId == 1" 
                                mat-menu-item 
                                class="text-application"
                                (click)="followLink(movie.path)">
                                <mat-icon style="color: #3f51b5">remove_red_eye</mat-icon>
                                Check
                            </button>
                            <button
                                *ngIf="movie.statusId == 2" 
                                mat-menu-item 
                                class="text-application"
                                (click)="followLink(movie.path)">
                                <mat-icon style="color: green">cloud_download</mat-icon>
                                Download
                            </button>
                            <button
                                *ngIf="movie.statusId == 4" 
                                mat-menu-item 
                                class="text-application"
                                (click)="followLink(movie.path)">
                                <mat-icon style="color: #3f51b5">remove_red_eye</mat-icon>
                                Watch
                            </button>
                            <button
                                *ngIf="movie.statusId == 5" 
                                mat-menu-item 
                                class="text-application"
                                (click)="followLink(movie.path)">
                                <mat-icon style="color: #0e8999">search</mat-icon>
                                Search
                            </button>
                            <button
                                mat-menu-item 
                                class="text-application"
                                (click)="deleteMovie(movie.key)">
                                <mat-icon style="color: #f44336;">delete</mat-icon>
                                Delete
                            </button>
                        </mat-menu>                     
                        <button
                            *ngIf="movie.part" 
                            type="button"
                            mat-button 
                            (click)="showDetailsMovie(movie)"
                            class="style-button text-application"
                            [ngStyle]="{'margin-bottom': movie.nameMovie.length > 25 ? '3%' : ''}">
                            <mat-icon style="color: #a54403">view_list</mat-icon>
                            <span>Details</span>
                        </button>
                        <br><br>
                    </div>
                </div>
            </div>   
        </mat-grid-tile>
    </mat-grid-list>

    <mat-grid-list *ngIf="pagedList.length !== 0 && pagedList.length > 3" cols=4 #grid rowHeight="320px" gutterSize="15px">
        <mat-grid-tile *ngFor="let movie of pagedList">
            <div class="flip-container">
                <div class="card">
                    <div class="front">
                        <img *ngIf="movie.imageUrl" [src]="movie.imageUrl" class="movie-image">
                        <img *ngIf="!movie.imageUrl" src="/assets/pictures/NoImageAvailable.png" class="movie-image">    
                    </div>
                    <div class="back">
                        <h4 class="text-application" style="text-align: center;font-weight: 600;">{{ movie.nameMovie }}</h4>
                        <br>
                        <h4 class="text-application" style="text-align: center;">
                            <span *ngIf="movie.year">{{ movie.year }}</span>
                            <span *ngIf="!movie.year"><i class="fa fa-minus-circle" aria-hidden="true"></i></span>  
                        </h4>
                        <br>
                        <span
                            [ngStyle]="{'margin-bottom': movie.nameMovie.length > 25 ? '3%' : ''}"
                            style="display: table; margin: 0 auto;"
                            [ngClass]="movie.statusId == 1 && !movie.part ? 'wait-image' : 
                            movie.statusId == 2 && !movie.part ? 'not-download-image':
                            movie.statusId == 3 && !movie.part && movie.note !== 'Not liked' ? 'watched-image':
                            movie.statusId == 4 && !movie.part ? 'not-watched-image':
                            movie.statusId == 5 && !movie.part ? 'search-image':
                            movie.part && (movie.statusId == 1 || movie.statusId == 2|| movie.statusId == 3 || movie.statusId == 4 ||movie.statusId == 5) ? 'parts-image':
                            movie.statusId == 3 && !movie.part && movie.note == 'Not liked' ? 'not-liked-image':''">
                        </span>
                        <br>
                        <button 
                            *ngIf="!movie.part"
                            type="button"
                            mat-button
                            [matMenuTriggerFor]="menu" 
                            class="style-button text-application"
                            [ngStyle]="{'margin-bottom': movie.nameMovie.length > 25 ? '3%' : ''}">
                            <mat-icon style="color: #07609b">calendar_view_day</mat-icon>
                            Actions
                        </button>
                        <mat-menu #menu="matMenu" class="my-menu">
                            <button
                                mat-menu-item 
                                class="text-application"
                                (click)="editMovie(movie)">
                                <mat-icon style="color: #9C27B0">edit</mat-icon>
                                Edit
                            </button>
                            <button
                                *ngIf="movie.statusId == 1" 
                                mat-menu-item 
                                class="text-application"
                                (click)="followLink(movie.path)">
                                <mat-icon style="color: #3f51b5">remove_red_eye</mat-icon>
                                Check
                            </button>
                            <button
                                *ngIf="movie.statusId == 2" 
                                mat-menu-item 
                                class="text-application"
                                (click)="followLink(movie.path)">
                                <mat-icon style="color: green">cloud_download</mat-icon>
                                Download
                            </button>
                            <button
                                *ngIf="movie.statusId == 4" 
                                mat-menu-item 
                                class="text-application"
                                (click)="followLink(movie.path)">
                                <mat-icon style="color: #3f51b5">remove_red_eye</mat-icon>
                                Watch
                            </button>
                            <button
                                *ngIf="movie.statusId == 5" 
                                mat-menu-item 
                                class="text-application"
                                (click)="followLink(movie.path)">
                                <mat-icon style="color: #0e8999">search</mat-icon>
                                Search
                            </button>
                            <button
                                mat-menu-item 
                                class="text-application"
                                (click)="deleteMovie(movie.key)">
                                <mat-icon style="color: #f44336;">delete</mat-icon>
                                Delete
                            </button>
                        </mat-menu>                     
                        <button
                            *ngIf="movie.part" 
                            type="button"
                            mat-button 
                            (click)="showDetailsMovie(movie)"
                            class="style-button text-application"
                            [ngStyle]="{'margin-bottom': movie.nameMovie.length > 25 ? '3%' : ''}">
                            <mat-icon style="color: #a54403">view_list</mat-icon>
                            <span>Details</span>
                        </button>
                        <br><br>
                    </div>
                </div>
            </div>   
        </mat-grid-tile>
    </mat-grid-list>
</ng-container>

<ng-container *ngIf="isTablet">
    <mat-grid-list *ngIf="pagedList.length !== 0 && pagedList.length > 2" cols=3 #grid rowHeight="320px" gutterSize="15px">
        <mat-grid-tile *ngFor="let movie of pagedList">
            <div class="flip-container">
                <div class="card">
                    <div class="front">
                        <img *ngIf="movie.imageUrl" [src]="movie.imageUrl" class="movie-image">
                        <img *ngIf="!movie.imageUrl" src="/assets/pictures/NoImageAvailable.png" class="movie-image">    
                    </div>
                    <div class="back">
                        <h4 class="text-application" style="text-align: center;font-weight: 600;">{{ movie.nameMovie }}</h4>
                        <br>
                        <h4 class="text-application" style="text-align: center;">
                            <span *ngIf="movie.year">{{ movie.year }}</span>
                            <span *ngIf="!movie.year"><i class="fa fa-minus-circle" aria-hidden="true"></i></span>  
                        </h4>
                        <br>
                        <span
                            [ngStyle]="{'margin-bottom': movie.nameMovie.length > 25 ? '3%' : ''}"
                            style="display: table; margin: 0 auto;"
                            [ngClass]="movie.statusId == 1 && !movie.part? 'wait-image' : 
                            movie.statusId == 2 && !movie.part ? 'not-download-image':
                            movie.statusId == 3 && !movie.part && movie.note !== 'Not liked' ? 'watched-image':
                            movie.statusId == 4 && !movie.part ? 'not-watched-image':
                            movie.statusId == 5 && !movie.part ? 'search-image':
                            movie.part && (movie.statusId == 1 || movie.statusId == 2|| movie.statusId == 3 || movie.statusId == 4 ||movie.statusId == 5) ? 'parts-image':
                            movie.statusId == 3 && !movie.part && movie.note == 'Not liked' ? 'not-liked-image':''">
                        </span>
                        <br>
                        <button 
                            *ngIf="!movie.part"
                            type="button"
                            mat-button
                            [matMenuTriggerFor]="menu" 
                            class="style-button text-application"
                            [ngStyle]="{'margin-bottom': movie.nameMovie.length > 25 ? '3%' : ''}">
                            <mat-icon style="color: #07609b">calendar_view_day</mat-icon>
                            Actions
                        </button>
                        <mat-menu #menu="matMenu" class="my-menu">
                            <button
                                mat-menu-item 
                                class="text-application"
                                (click)="editMovie(movie)">
                                <mat-icon style="color: #9C27B0">edit</mat-icon>
                                Edit
                            </button>
                            <button
                                *ngIf="movie.statusId == 1" 
                                mat-menu-item 
                                class="text-application"
                                (click)="followLink(movie.path)">
                                <mat-icon style="color: #3f51b5">remove_red_eye</mat-icon>
                                Check
                            </button>
                            <button
                                *ngIf="movie.statusId == 2" 
                                mat-menu-item 
                                class="text-application"
                                (click)="followLink(movie.path)">
                                <mat-icon style="color: green">cloud_download</mat-icon>
                                Download
                            </button>
                            <button
                                *ngIf="movie.statusId == 4" 
                                mat-menu-item 
                                class="text-application"
                                (click)="followLink(movie.path)">
                                <mat-icon style="color: #3f51b5">remove_red_eye</mat-icon>
                                Watch
                            </button>
                            <button
                                *ngIf="movie.statusId == 5" 
                                mat-menu-item 
                                class="text-application"
                                (click)="followLink(movie.path)">
                                <mat-icon style="color: #0e8999">search</mat-icon>
                                Search
                            </button>
                            <button
                                mat-menu-item 
                                class="text-application"
                                (click)="deleteMovie(movie.key)">
                                <mat-icon style="color: #f44336;">delete</mat-icon>
                                Delete
                            </button>
                        </mat-menu>                     
                        <button
                            *ngIf="movie.part" 
                            type="button"
                            mat-button 
                            (click)="showDetailsMovie(movie)"
                            class="style-button text-application"
                            [ngStyle]="{'margin-bottom': movie.nameMovie.length > 25 ? '3%' : ''}">
                            <mat-icon style="color: #a54403">view_list</mat-icon>
                            <span>Details</span>
                        </button>
                        <br><br>
                    </div>
                </div>
            </div>   
        </mat-grid-tile>
    </mat-grid-list>
</ng-container>

<div *ngIf="pagedList.length == 0" class="row justify-content-center no-results text-application">
    No results
</div>

<div class="row mat-paginator">
   <mat-paginator 
       [length]="length"
       [pageSize]="isDesktop ? 8 : 6"
       [pageSizeOptions]="isDesktop ? [8] : [6]"
       showFirstLastButtons
       (page)="OnPageChange($event)">
   </mat-paginator>
</div>