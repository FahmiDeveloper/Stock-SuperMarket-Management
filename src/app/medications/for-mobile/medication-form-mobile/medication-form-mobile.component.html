<h3 *ngIf="!medication.key" mat-dialog-title class="text-application">Add new medication</h3>
<h3 *ngIf="medication.key" mat-dialog-title class="text-application">Edit medication</h3>

<mat-dialog-content style="display: inherit !important;">
  <form (ngSubmit)="save()" #f="ngForm">

    <mat-form-field color="accent">
      <mat-placeholder class="text-application"><span>Name</span></mat-placeholder>
      <input matInput #input type="text" [(ngModel)]="medication.medicationName" name="medicationName" class="text-application" required>
    </mat-form-field>

    <mat-form-field color="accent" class="text-application" style="width: 150px;">
      <mat-select placeholder="Disease" name="diseaseSelectedId" class="text-application" [(ngModel)]="diseaseSelected" required>
        <mat-option value=""></mat-option>
        <mat-option *ngFor="let disease of arrayDiseases" [value]="disease">
          <span class="text-application">{{disease.diseaseName}}</span>
        </mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field color="accent">
      <mat-placeholder class="text-application"><span>Utilisation</span></mat-placeholder>
      <textarea matInput #input type="text" [(ngModel)]="medication.utilisation" name="note" rows="4" cols="40" class="text-application"></textarea>
    </mat-form-field>

    <button type="button" mat-button (click)="fileInput.click()">Choose file</button>
    <input hidden (change)="onFileChanged($event)" #fileInput type="file" id="file">
    <br *ngIf="progressValue"><br *ngIf="progressValue">
    <div *ngIf="progressValue | async as val" class="progress-background">
        <div class="progress-meter" [ngStyle] = "{'width.%': val}"></div>
        <span style="margin-left: 45%;">{{ val | number: '1.0-0' }}%</span>
    </div>

    <br *ngIf="progressValue">

    <div class="row justify-content-center" mat-dialog-actions>
      <button mat-button type="submit" [disabled]="!f.valid" [mat-dialog-close]="1" style="background:#FF5722;color: white;" class="text-application">Save</button>
      <button mat-button type="button" (click)="close()" tabindex="-1" style="background:#607D8B;color: white;" class="text-application">Cancel</button>
    </div>

  </form>
</mat-dialog-content>